<app-nav></app-nav>
<div class="p-4">
  <h2 class="text-2xl font-bold mb-2">Seleccionar raza</h2>
  <div class="mb-4">
    <div *ngIf="loadingBreeds()" class="flex items-center gap-2 text-gray-600">
      <svg class="w-5 h-5 animate-spin text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path></svg>
      Cargando razas...
    </div>
    <div *ngIf="!loadingBreeds()" class="relative">
      <select (change)="onSelect($any($event.target).value)" aria-label="Seleccionar raza" class="block w-full appearance-none bg-white border border-gray-300 px-4 py-2 pr-10 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
        <option value="">-- Elija una raza --</option>
        <option *ngFor="let b of breeds()" [value]="b.id">{{ b.name }}</option>
      </select>
      <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400">
        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 011.08 1.04l-4.25 4.25a.75.75 0 01-1.06 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
        </svg>
      </div>
    </div>
  </div>

  <div *ngIf="selectedBreed() as sb">
    <h3 class="text-xl font-semibold">{{ sb.name }}</h3>
    <p class="text-sm text-gray-600">{{ sb.temperament }}</p>
    <p class="mt-2">{{ sb.description }}</p>

    <div class="mt-4 flex items-center gap-3">
       <button (click)="prev()" [disabled]="index()===0" class="px-3 py-2 rounded-md bg-indigo-500 text-white disabled:opacity-50 disabled:bg-gray-300">Prev</button>
       <div class="flex-1 flex items-center justify-center">
         <div class="max-w-full w-full md:w-80 h-48 bg-gray-100 rounded overflow-hidden flex items-center justify-center relative">
           <div *ngIf="imageLoading()" class="absolute inset-0 flex items-center justify-center bg-white/50">
             <svg class="w-8 h-8 animate-spin text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path></svg>
           </div>
           <img *ngIf="!imageLoading() && images()[index()]?.url" [src]="images()[index()]?.url" alt="image" class="object-cover w-full h-full" />
           <div *ngIf="!imageLoading() && !images()[index()]?.url" class="text-gray-400">No image</div>
         </div>
       </div>
       <button (click)="next()" [disabled]="index()>=images().length-1" class="px-3 py-2 rounded-md bg-indigo-500 text-white disabled:opacity-50 disabled:bg-gray-300">Next</button>
    </div>
    <div class="mt-2 text-sm text-gray-600">Imagen <span class="font-medium">{{ index()+1 }}</span> de <span class="font-medium">{{ images().length }}</span></div>
  </div>
</div>
